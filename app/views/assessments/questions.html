#{extends 'main.html' /}
#{set title:assessment.title /}
#{set hideHeader:'true' /}
#{set hideFooter:'true' /}

#{set 'moreStyles'}
#{get 'moreStyles' /}
#{/set}

<section class="ui padded page stackable grid">
<div class="ui fourteen wide centered column">
  #{assessmentSteps /}
  <div class="ui clearing segment">
    <div class="ui ribbon label">&{'page'} ${page+1} &{'of'} ${pages}</div>
    <form class="ui form" action="@{Assessments.questions}" method="POST" enctype="multipart/form-data">
      <input type="hidden" name="code" value="${assessment.code}" />
      <input type="hidden" name="assessor.id" value="${assessor.id}" />
      <input type="hidden" name="metric.code" value="${metric.code}" />
      <input type="hidden" name="level" value="${level}" />
      <h1 class="ui dividing header">${metric.title} </h1>
      
      #{list subMetrics}
      <div class="ui header">
        ${_.title}
        <div class="sub header">
          #{if _.description && _.description.length()>0}<strong>&{'assessments.SubMetricDescription'}</strong>#{/if}
          ${_.description.raw()}
        </div>
      </div>
      #{list controllers.Elements.getQuestions(_, level)}
      <p><strong>${_index}-</strong> ${_.description.raw()}</p>
      <div class="inline fields">
        <div class="field">
          <div class="ui radio checkbox">
            <input type="radio" name="response_${_.id}" value="yes" />
            <label>&{'yes'}</label>
          </div>
        </div>
        <div class="field">
          <div class="ui radio checkbox">
            <input type="radio" name="response_${_.id}" value="no" />
            <label>&{'no'}</label>
          </div>
        </div>
        <div class="field">
          <div class="ui radio checkbox">
            <input type="radio" name="response_${_.id}" value="alt" />
            <label>&{'none'}</label>
          </div>
        </div>
        <div class="field">
          <div class="ui radio checkbox">
            <input type="radio" name="response_${_.id}" value="none" />
            <label>&{'alt'}</label>
          </div>
        </div>
      </div>
      <div class="ui divider"></div>
      #{/list}
      #{/list}
            
      <div class="ui divider"></div>
      
      <div class="field">
        <a href="@{Assessments.finish(assessment.code)}" class="ui right aligned red button">خروج</a>
        <button type="submit" class="ui right floated right labeled icon primary button">
          <i class="right arrow icon"></i>
          #{if page+1 != pages}
          &{'next'}
          #{/if}
          #{else}
          &{'showResults'}
          #{/else}
        </button>
      </div>
    </form>
  </div>
</div>
</section>

#{set 'moreScripts'}
#{get 'moreScripts' /}
#{/set}
